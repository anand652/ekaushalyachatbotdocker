1)create an ubuntu instance 

allow ssh,http,https,select t2.micro,select 16gb storage and connect instance

2)connect via ssh by navigating to the folder where you pem file is  in gitbash

command will be in your ec2 connect to ec2 via ssh client

3)updates and upgrade upgrade ubuntu packages

sudo apt update 

sudo apt upgrade -y 

sudo reboot

wait for 3-4mins and then

run ssh command agains

4)Install Python,venv,git and pip

sudo apt install python3-pip python3-venv git -y

5)Install PostgreSQL

sudo apt install postgresql postgresql-contrib -y

6)Verify PostgreSQL is running:

sudo systemctl status postgresql

7)configure postgres user:

1)Switch to the postgres user:

sudo -i -u postgres

2)Open PostgreSQL prompt:

psql

3)Create the database chatbot_db

CREATE DATABASE chatbot_db;

4)Connect to chatbot_db

\c chatbot_db

5)create the companies table manually in PostgreSQL:

CREATE TABLE companies (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

6)insert your initial company record manually:

INSERT INTO companies (name) VALUES ('ekaushalya');

7)check the inserted company by running a simple SELECT query in psql.

SELECT * FROM companies;

8)to exit from chatbot_db

\q

9)to exit from postgres

exit

8)now you will be back to unbuntu

create a project folder and get inside that

mkdir project 

cd project

9)git clone the project here 

git clone https://github.com/anand652/ekaushalyachatbot.git

10)navigate to backend_api and create virtual environment

python3 -m venv myenv
source myenv/bin/activate

install dependencies

pip install --upgrade pip
pip install -r requirements.txt

11)navigate to frontend_app and repeat the same steps


python3 -m venv myenv
source myenv/bin/activate

install dependencies

pip install --upgrade pip
pip install -r requirements.txt

11)create .env in backend folder in the root

nano .env

DATABASE_URL= "postgresql://postgres:test@localhost/chatbot_db"

COHERE_API_KEY=""    ("add your cohere api key")

once done ctrl+o then enter then ctrl + x

and same for github frontend .env folder navigate that folder in ubuntu and then 

nano .env

BACKEND_URL="http://127.0.0.1:8000"

once done ctrl+o then enter then ctrl + x

12)set the password for postgres same as the password used in database url in your backend .env folder

for example your database url

DATABASE_URL="postgresql://postgres:test@localhost/chatbot_db"

then get inside postgres and set the same password and exit

sudo -u postgres psql

ALTER USER postgres WITH PASSWORD 'test';

\q 

13)we need to enable the port 8000 and 8501 in our instance to do that

1)under your instance navigate to security

2)click on security groups

3)click on edit inbound rules

4)add rule

select custom tcp - add port range(one for 8000 and another for 8501) - choose source as custom - choose cidr blocks as - 0.0.0.0/0 - click on save rules

14)now navigate to backend folder , activate virtual environment and then run

uvicorn app.main:app --host 0.0.0.0 --port 8000

15)open one more gitbash terminal and then navigate to the folder where your pem file is and connect through ssh and run 

streamlit run app.py --server.port 8501 --server.address 0.0.0.0

16)To run it in port -80

sudo /home/ubuntu/project/ekaushalyachatbot/frontend_app/myenv/bin/streamlit run app.py --server.port 80 --server.address 0.0.0.0

17)To test it in browser go to your instance's ipv4 address

---------------------------------------------------------------------------------------------------------------------------------------------
=>If you forgot to set volume as 16 gb you can follow the below instructions

=>how to  increase volume in ebs

click on volume 

select the instance 

go to actions 

increase by typing the storage u want and then click on modify  and apply

run these commands

1)Verify new disk size

lsblk

2)Resize the partition

sudo growpart /dev/xvda 1

3)Expand the filesystem

sudo resize2fs /dev/xvda1

4)Confirm the new size

df -h










